---
import ThemeToggle from "../components/ThemeToggle.jsx";

const navItems = [
  { href: "/", label: "Inicio" },
  { href: "/#", label: "Productos" },
  { href: "/#", label: "Servicios" },
  { href: "/#", label: "Quienes somos" },
  { href: "/#", label: "Contacto" },
];
---

<nav class="glass-navbar w-full fixed top-0 left-0 shadow-md z-50 bg-[rgba(255,255,255,0.3)] backdrop-blur-md border border-[rgba(209,213,219,0.3)]">
<div class="w-full px-6 md:px-16 py-4 flex items-center justify-between">
    <a href="/" class="text-[var(--color-text-primary)] text-4xl font-bold tracking-wide hover:text-[var(--color-text-hover-navbar)] transition-colors duration-300">
      Agriviva
    </a>

    <!-- Menu desktop -->
<ul class="hidden lg:flex space-x-12 text-[var(--color-text-primary)] font-semibold text-2xl">
      {navItems.map(({ href, label }) => (
        <li>
          <a href={href} class="hover:text-[var(--color-text-hover-navbar)] transition-colors duration-300">
            {label}
          </a>
        </li>
      ))}
       <li>
    <ThemeToggle client:load /> <!-- Montado con React -->
  </li>
    </ul>

    <!-- Botón hamburguesa para móvil -->
<button id="menu-toggle" class="lg:hidden text-[var(--color-text-primary)] focus:outline-none ml-6 md:ml-0" aria-label="Toggle menu">
      <svg id="icon-open" class="w-8 h-8 block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg id="icon-close" class="w-8 h-8 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
</nav>

<!-- Menú lateral móvil -->
<div id="mobile-menu" class="fixed top-0 left-0 h-full w-64 bg-white bg-opacity-90 backdrop-blur-md shadow-lg z-40 transform -translate-x-full transition-transform duration-300">
  <div class="mt-35 flex flex-col space-y-10 px-6 text-lg font-semibold text-[var(--color-text-primary)]">
    {navItems.map(({ href, label }) => (
      <a href={href} class="hover:text-[var(--color-text-hover-navbar)] transition-colors">
        {label}
      </a>
    ))}
  </div>
</div>

<!-- Overlay -->
<div id="overlay" class="fixed inset-0 bg-black bg-opacity-30 z-30 hidden"></div>

<script is:inline>
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const overlay = document.getElementById('overlay');
  const iconOpen = document.getElementById('icon-open');
  const iconClose = document.getElementById('icon-close');

  function toggleMenu() {
    const isOpen = mobileMenu.classList.contains('-translate-x-full') === false;

    if (isOpen) {
      mobileMenu.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
      iconOpen.classList.remove('hidden');
      iconClose.classList.add('hidden');
    } else {
      mobileMenu.classList.remove('-translate-x-full');
      overlay.classList.remove('hidden');
      iconOpen.classList.add('hidden');
      iconClose.classList.remove('hidden');
    }
  }

  menuToggle.addEventListener('click', toggleMenu);
  overlay.addEventListener('click', toggleMenu);
</script>

<style>
  :global(body) {
    padding-top: 72px;
  }
  .glass-navbar {
    background: var(--color-bg-body);
  }
</style>
